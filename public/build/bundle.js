var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function a(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function d(){return u(" ")}function g(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function h(t){return function(e){return e.preventDefault(),t.call(this,e)}}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let $;function b(t){$=t}function v(){if(!$)throw new Error("Function called outside component initialization");return $}const w=[],y=[],x=[],k=[],_=Promise.resolve();let A=!1;function O(t){x.push(t)}const C=new Set;let L=0;function M(){const t=$;do{for(;L<w.length;){const t=w[L];L++,b(t),E(t.$$)}for(b(null),w.length=0,L=0;y.length;)y.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];C.has(e)||(C.add(e),e())}x.length=0}while(w.length);for(;k.length;)k.pop()();A=!1,C.clear(),b(t)}function E(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const j=new Set;let z;function q(){z={r:0,c:[],p:z}}function N(){z.r||l(z.c),z=z.p}function T(t,e){t&&t.i&&(j.delete(t),t.i(e))}function B(t,e,n,l){if(t&&t.o){if(j.has(t))return;j.add(t),z.c.push((()=>{j.delete(t),l&&(n&&t.d(1),l())})),t.o(e)}}function I(t){t&&t.c()}function S(t,n,r,i){const{fragment:s,on_mount:c,on_destroy:a,after_update:f}=t.$$;s&&s.m(n,r),i||O((()=>{const n=c.map(e).filter(o);a?a.push(...n):l(n),t.$$.on_mount=[]})),f.forEach(O)}function H(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function P(t,e){-1===t.$$.dirty[0]&&(w.push(t),A||(A=!0,_.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,o,r,i,s,a,f,u=[-1]){const d=$;b(e);const g=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:o.target||d.$$.root};f&&f(g.root);let h=!1;if(g.ctx=r?r(e,o.props||{},((t,n,...l)=>{const o=l.length?l[0]:n;return g.ctx&&s(g.ctx[t],g.ctx[t]=o)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](o),h&&P(e,t)),n})):[],g.update(),h=!0,l(g.before_update),g.fragment=!!i&&i(g.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);g.fragment&&g.fragment.l(t),t.forEach(c)}else g.fragment&&g.fragment.c();o.intro&&T(e.$$.fragment),S(e,o.target,o.anchor,o.customElement),M()}b(d)}class Y{$destroy(){H(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function D(e){let n,l,o;return{c(){n=u("â“’ Made by "),l=f("a"),l.textContent="Amit Nave",o=u(" 2022"),m(l,"href","https://github.com/AmiterCodes")},m(t,e){s(t,n,e),s(t,l,e),s(t,o,e)},p:t,i:t,o:t,d(t){t&&c(n),t&&c(l),t&&c(o)}}}class F extends Y{constructor(t){super(),W(this,t,null,D,r,{})}}function G(t){let e;function n(t,e){return t[0].bomb?K:J}let l=n(t),o=l(t);return{c(){o.c(),e=u("")},m(t,n){o.m(t,n),s(t,e,n)},p(t,r){l===(l=n(t))&&o?o.p(t,r):(o.d(1),o=l(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&c(e)}}}function R(e){let n;return{c(){n=f("div"),n.innerHTML='<img src="./assets/flag.svg" alt="flag icon"/>',m(n,"class","flag svelte-1q5fnaz")},m(t,e){s(t,n,e)},p:t,d(t){t&&c(n)}}}function J(t){let e,n,l=(t[0].value>0?t[0].value:" ")+"";return{c(){e=f("div"),n=u(l)},m(t,l){s(t,e,l),i(e,n)},p(t,e){1&e&&l!==(l=(t[0].value>0?t[0].value:" ")+"")&&p(n,l)},d(t){t&&c(e)}}}function K(e){let n;return{c(){n=f("div"),n.innerHTML='<img src="./assets/bomb.svg" alt="bomb icon"/>',m(n,"class","bomb")},m(t,e){s(t,n,e)},p:t,d(t){t&&c(n)}}}function Q(e){let n,r,i,a;function u(t,e){return t[0].flagged?R:t[0].revealed?G:void 0}let d=u(e),p=d&&d(e);return{c(){n=f("button"),p&&p.c(),m(n,"class",r="tile tile-"+e[0].value+" "+(e[0].revealed||e[0].flagged?"revealed":"")+" svelte-1q5fnaz")},m(t,l){s(t,n,l),p&&p.m(n,null),i||(a=[g(n,"click",(function(){o(e[1])&&e[1].apply(this,arguments)})),g(n,"contextmenu",h((function(){o(e[2])&&e[2].apply(this,arguments)})))],i=!0)},p(t,[l]){d===(d=u(e=t))&&p?p.p(e,l):(p&&p.d(1),p=d&&d(e),p&&(p.c(),p.m(n,null))),1&l&&r!==(r="tile tile-"+e[0].value+" "+(e[0].revealed||e[0].flagged?"revealed":"")+" svelte-1q5fnaz")&&m(n,"class",r)},i:t,o:t,d(t){t&&c(n),p&&p.d(),i=!1,l(a)}}}function U(t,e,n){let{tile:l}=e,{reveal:o}=e,{rightClick:r}=e;return t.$$set=t=>{"tile"in t&&n(0,l=t.tile),"reveal"in t&&n(1,o=t.reveal),"rightClick"in t&&n(2,r=t.rightClick)},[l,o,r]}class V extends Y{constructor(t){super(),W(this,t,U,Q,r,{tile:0,reveal:1,rightClick:2})}}function X(e){let n,l,o,r,a,$,b,v,w,y;return{c(){n=f("div"),l=f("h2"),o=u(e[1]),r=d(),a=f("button"),a.textContent="Restart",$=d(),b=f("h2"),v=u(e[2]),m(l,"class","svelte-19xp0df"),m(b,"class","svelte-19xp0df"),m(n,"class","toolbar svelte-19xp0df")},m(t,c){s(t,n,c),i(n,l),i(l,o),i(n,r),i(n,a),i(n,$),i(n,b),i(b,v),w||(y=g(a,"click",h(e[3])),w=!0)},p(t,[e]){2&e&&p(o,t[1]),4&e&&p(v,t[2])},i:t,o:t,d(t){t&&c(n),w=!1,y()}}}function Z(t,e,n){let{restart:l}=e,{time:o}=e,{bombsLeft:r}=e;return t.$$set=t=>{"restart"in t&&n(0,l=t.restart),"time"in t&&n(1,o=t.time),"bombsLeft"in t&&n(2,r=t.bombsLeft)},[l,o,r,()=>l()]}class tt extends Y{constructor(t){super(),W(this,t,Z,X,r,{restart:0,time:1,bombsLeft:2})}}function et(e){let n,l,r,a,d,$,b,v,w,y=e[2]?"Win":"Lose";return{c(){n=f("div"),l=f("div"),r=u("You "),a=u(y),d=u("! click to play again\n    "),$=f("button"),$.textContent="PLAY AGAIN",m($,"class","play-again-button svelte-k7lzw"),m(l,"class","content svelte-k7lzw"),m(n,"class",b="modal "+(e[0]?"show":"hide")+" svelte-k7lzw")},m(t,c){s(t,n,c),i(n,l),i(l,r),i(l,a),i(l,d),i(l,$),v||(w=g($,"click",h((function(){o(e[1])&&e[1].apply(this,arguments)}))),v=!0)},p(t,[l]){e=t,4&l&&y!==(y=e[2]?"Win":"Lose")&&p(a,y),1&l&&b!==(b="modal "+(e[0]?"show":"hide")+" svelte-k7lzw")&&m(n,"class",b)},i:t,o:t,d(t){t&&c(n),v=!1,w()}}}function nt(t,e,n){let{show:l}=e,{playAgain:o}=e,{won:r}=e;return t.$$set=t=>{"show"in t&&n(0,l=t.show),"playAgain"in t&&n(1,o=t.playAgain),"won"in t&&n(2,r=t.won)},[l,o,r]}class lt extends Y{constructor(t){super(),W(this,t,nt,et,r,{show:0,playAgain:1,won:2})}}function ot(t,e,n){const l=t.slice();return l[14]=e[n],l[16]=n,l}function rt(t,e,n){const l=t.slice();return l[17]=e[n],l[19]=n,l}function it(t){let e,n;function l(){return t[8](t[16],t[19],t[17])}function o(){return t[9](t[16],t[19],t[17])}return e=new V({props:{tile:t[17],reveal:l,rightClick:o}}),{c(){I(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(n,r){t=n;const i={};2&r&&(i.tile=t[17]),2&r&&(i.reveal=l),2&r&&(i.rightClick=o),e.$set(i)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function st(t){let e,n,l,o=t[14],r=[];for(let e=0;e<o.length;e+=1)r[e]=it(rt(t,o,e));const u=t=>B(r[t],1,1,(()=>{r[t]=null}));return{c(){e=f("tr");for(let t=0;t<r.length;t+=1)r[t].c();n=d(),m(e,"class","row svelte-b4t9uj")},m(t,o){s(t,e,o);for(let t=0;t<r.length;t+=1)r[t].m(e,null);i(e,n),l=!0},p(t,l){if(98&l){let i;for(o=t[14],i=0;i<o.length;i+=1){const s=rt(t,o,i);r[i]?(r[i].p(s,l),T(r[i],1)):(r[i]=it(s),r[i].c(),T(r[i],1),r[i].m(e,n))}for(q(),i=o.length;i<r.length;i+=1)u(i);N()}},i(t){if(!l){for(let t=0;t<o.length;t+=1)T(r[t]);l=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)B(r[t]);l=!1},d(t){t&&c(e),a(r,t)}}}function ct(t){let e,n,l,o,r,u,h,m,p;e=new lt({props:{playAgain:t[4],won:t[2],show:t[1].gameOver}}),o=new tt({props:{time:t[0],restart:t[4],bombsLeft:t[1].bombs-t[3]}});let $=t[1].tiles,b=[];for(let e=0;e<$.length;e+=1)b[e]=st(ot(t,$,e));const v=t=>B(b[t],1,1,(()=>{b[t]=null}));return{c(){I(e.$$.fragment),n=d(),l=f("div"),I(o.$$.fragment),r=d(),u=f("table");for(let t=0;t<b.length;t+=1)b[t].c()},m(c,a){S(e,c,a),s(c,n,a),s(c,l,a),S(o,l,null),i(l,r),i(l,u);for(let t=0;t<b.length;t+=1)b[t].m(u,null);h=!0,m||(p=g(l,"keypress",t[10]),m=!0)},p(t,[n]){const l={};4&n&&(l.won=t[2]),2&n&&(l.show=t[1].gameOver),e.$set(l);const r={};if(1&n&&(r.time=t[0]),10&n&&(r.bombsLeft=t[1].bombs-t[3]),o.$set(r),98&n){let e;for($=t[1].tiles,e=0;e<$.length;e+=1){const l=ot(t,$,e);b[e]?(b[e].p(l,n),T(b[e],1)):(b[e]=st(l),b[e].c(),T(b[e],1),b[e].m(u,null))}for(q(),e=$.length;e<b.length;e+=1)v(e);N()}},i(t){if(!h){T(e.$$.fragment,t),T(o.$$.fragment,t);for(let t=0;t<$.length;t+=1)T(b[t]);h=!0}},o(t){B(e.$$.fragment,t),B(o.$$.fragment,t),b=b.filter(Boolean);for(let t=0;t<b.length;t+=1)B(b[t]);h=!1},d(t){H(e,t),t&&c(n),t&&c(l),H(o),a(b,t),m=!1,p()}}}function at(){return Object.assign(Object.assign({},ft(0)),{opened:!1})}function ft(t=99,e=30,n=16,l=[0,0]){let o={tiles:[],bombs:t,width:e,height:n,gameOver:!1,opened:!1};for(let t=0;t<o.height;t++){o.tiles[t]=[];for(let e=0;e<o.width;e++)o.tiles[t][e]={bomb:!1,flagged:!1,revealed:!1}}for(let r=0;r<t;r++){let t=Math.floor(Math.random()*n),i=Math.floor(Math.random()*e);Math.abs(t-l[0])<=1&&Math.abs(i-l[1])<=1||o.tiles[t][i].bomb?r--:o.tiles[t][i].bomb=!0}for(let t=0;t<o.height;t++)for(let e=0;e<o.width;e++)if(!o.tiles[t][e].bomb){let n=0;for(let l=t-1;l<=t+1;l++)for(let t=e-1;t<=e+1;t++)l>=0&&l<o.height&&t>=0&&t<o.width&&o.tiles[l][t].bomb&&n++;o.tiles[t][e].value=n}return o}function ut(t,e,n){let l,o=0,r=at(),i=!1,s=0;var c;function a(){n(1,r=at()),n(2,i=!1),n(3,s=0),n(0,o=0)}function f(t,e,l,o){if(r.gameOver)a();else if(r.opened||(n(1,r=Object.assign(Object.assign({},ft(99,30,16,[t,e])),{opened:!0})),l=r.tiles[t][e]),!l.flagged)if(l.bomb){n(1,r.gameOver=!0,r);for(let t=0;t<r.height;t++)for(let e=0;e<r.width;e++)r.tiles[t][e].bomb&&n(1,r.tiles[t][e].revealed=!0,r)}else{if(l.revealed){let i=0,s=0,c=0;for(let n=t-1;n<=t+1;n++)for(let t=e-1;t<=e+1;t++)n>=0&&n<r.height&&t>=0&&t<r.width&&(r.tiles[n][t].flagged&&s++,r.tiles[n][t].revealed&&c++,i++);if(s===l.value)for(let n=t-1;n<=t+1;n++)for(let t=e-1;t<=e+1;t++)n>=0&&n<r.height&&t>=0&&t<r.width&&!r.tiles[n][t].flagged&&!r.tiles[n][t].revealed&&f(n,t,r.tiles[n][t],!1);else if(c===i-l.value&&o)for(let l=t-1;l<=t+1;l++)for(let t=e-1;t<=e+1;t++)l>=0&&l<r.height&&t>=0&&t<r.width&&!r.tiles[l][t].flagged&&!r.tiles[l][t].revealed&&(u(l,t,r.tiles[l][t]),n(1,r))}else if(0===l.value)for(let l=t-1;l<=t+1;l++)for(let t=e-1;t<=e+1;t++)l>=0&&l<r.height&&t>=0&&t<r.width&&!r.tiles[l][t].revealed&&(n(1,r.tiles[l][t].revealed=!0,r),f(l,t,r.tiles[l][t],!1));else l.revealed=!0;n(1,r),o&&function(){let t=0;for(let e=0;e<r.height;e++)for(let n=0;n<r.width;n++)r.tiles[e][n].revealed&&t++;return n(2,i=t===r.width*r.height-r.bombs)}()&&function(){n(1,r.gameOver=!0,r);for(let t=0;t<r.height;t++)for(let e=0;e<r.width;e++)r.tiles[t][e].bomb&&n(1,r.tiles[t][e].flagged=!0,r);n(1,r)}()}}function u(t,e,l){l.revealed||(n(1,r.tiles[t][e].flagged=!r.tiles[t][e].flagged,r),r.tiles[t][e].flagged?n(3,s++,s):n(3,s--,s),n(1,r))}function d(t){"r"===t.key&&a()}c=()=>{l=setInterval((()=>{r.gameOver||n(0,o++,o)}),1e3)},v().$$.on_mount.push(c),function(t){v().$$.on_destroy.push(t)}((()=>{clearInterval(l)}));return[o,r,i,s,a,f,u,d,(t,e,n)=>f(t,e,n,!0),(t,e,n)=>u(t,e,n),t=>d(t)]}class dt extends Y{constructor(t){super(),W(this,t,ut,ct,r,{})}}function gt(e){let n,l,o,r,a,u,g;return r=new dt({}),u=new F({}),{c(){n=f("main"),l=f("h1"),l.textContent="MineSweeper",o=d(),I(r.$$.fragment),a=d(),I(u.$$.fragment),m(l,"class","svelte-1ov9qvk"),m(n,"class","svelte-1ov9qvk")},m(t,e){s(t,n,e),i(n,l),i(n,o),S(r,n,null),s(t,a,e),S(u,t,e),g=!0},p:t,i(t){g||(T(r.$$.fragment,t),T(u.$$.fragment,t),g=!0)},o(t){B(r.$$.fragment,t),B(u.$$.fragment,t),g=!1},d(t){t&&c(n),H(r),t&&c(a),H(u,t)}}}return new class extends Y{constructor(t){super(),W(this,t,null,gt,r,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
